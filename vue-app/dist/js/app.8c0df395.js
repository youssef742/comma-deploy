(function(){"use strict";var e={2131:function(e,t,o){var a=o(5130),i=o(6768),n=o(4232);const s={class:"app-container"},l={key:0,class:"sidebar"},r={class:"navigation-header"},c={style:{display:"flex","flex-direction":"row","align-items":"center","justify-content":"center"}};function d(e,t,o,a,d,u){const h=(0,i.g2)("Icon"),m=(0,i.g2)("router-view");return(0,i.uX)(),(0,i.CE)("div",s,[d.showSidebar?((0,i.uX)(),(0,i.CE)("div",l,[(0,i.Lk)("div",r,[(0,i.Lk)("h3",c,[(0,i.bF)(h,{icon:"mdi:comma-circle",width:"24px",height:"24px"}),t[10]||(t[10]=(0,i.eW)(" Comma "))]),t[11]||(t[11]=(0,i.Lk)("span",null,"Admin Dashboard",-1)),t[12]||(t[12]=(0,i.Lk)("p",null,"___________________________",-1))]),(0,i.Lk)("ul",null,[u.showTab("customers")?((0,i.uX)(),(0,i.CE)("li",{key:0,class:(0,n.C4)(["tab",{active:"customers"===d.activeTab}]),onClick:t[0]||(t[0]=e=>u.navigateTo("customers"))},[(0,i.bF)(h,{icon:"line-md:account",width:"24px",height:"24px"}),t[13]||(t[13]=(0,i.eW)(" Customers "))],2)):(0,i.Q3)("",!0),u.showTab("branches")?((0,i.uX)(),(0,i.CE)("li",{key:1,class:(0,n.C4)(["tab",{active:"branches"===d.activeTab}]),onClick:t[1]||(t[1]=e=>u.navigateTo("branches"))},[(0,i.bF)(h,{icon:"fluent:branch-20-filled",width:"24px",height:"24px"}),t[14]||(t[14]=(0,i.eW)(" Branches "))],2)):(0,i.Q3)("",!0),u.showTab("appointments")?((0,i.uX)(),(0,i.CE)("li",{key:2,class:(0,n.C4)(["tab",{active:"appointments"===d.activeTab}]),onClick:t[2]||(t[2]=e=>u.navigateTo("appointments"))},[(0,i.bF)(h,{icon:"icon-park-solid:appointment",width:"24px",height:"24px"}),t[15]||(t[15]=(0,i.eW)(" Appointments "))],2)):(0,i.Q3)("",!0),u.showTab("rooms")?((0,i.uX)(),(0,i.CE)("li",{key:3,class:(0,n.C4)(["tab",{active:"rooms"===d.activeTab}]),onClick:t[3]||(t[3]=e=>u.navigateTo("rooms"))},[(0,i.bF)(h,{icon:"cil:room",width:"24px",height:"24px"}),t[16]||(t[16]=(0,i.eW)(" Rooms "))],2)):(0,i.Q3)("",!0),u.showTab("employees")?((0,i.uX)(),(0,i.CE)("li",{key:4,class:(0,n.C4)(["tab",{active:"employees"===d.activeTab}]),onClick:t[4]||(t[4]=e=>u.navigateTo("employees"))},[(0,i.bF)(h,{icon:"clarity:employee-group-solid",width:"24px",height:"24px"}),t[17]||(t[17]=(0,i.eW)(" Employees "))],2)):(0,i.Q3)("",!0),u.showTab("kitchen-items")?((0,i.uX)(),(0,i.CE)("li",{key:5,class:(0,n.C4)(["tab",{active:"kitchen-items"===d.activeTab}]),onClick:t[5]||(t[5]=e=>u.navigateTo("kitchen-items"))},[(0,i.bF)(h,{icon:"tabler:tools-kitchen-2",width:"24px",height:"24px"}),t[18]||(t[18]=(0,i.eW)(" Kitchen Items "))],2)):(0,i.Q3)("",!0),u.showTab("bookings")?((0,i.uX)(),(0,i.CE)("li",{key:6,class:(0,n.C4)(["tab",{active:"bookings"===d.activeTab}]),onClick:t[6]||(t[6]=e=>u.navigateTo("bookings"))},[(0,i.bF)(h,{icon:"uim:calender",width:"24px",height:"24px"}),t[19]||(t[19]=(0,i.eW)(" Bookings "))],2)):(0,i.Q3)("",!0),u.showTab("statistics")?((0,i.uX)(),(0,i.CE)("li",{key:7,class:(0,n.C4)(["tab",{active:"statistics"===d.activeTab}]),onClick:t[7]||(t[7]=e=>u.navigateTo("statistics"))},[(0,i.bF)(h,{icon:"uil:statistics",width:"24px",height:"24px"}),t[20]||(t[20]=(0,i.eW)(" Statistics "))],2)):(0,i.Q3)("",!0),u.showTab("packages")?((0,i.uX)(),(0,i.CE)("li",{key:8,class:(0,n.C4)(["tab",{active:"packages"===d.activeTab}]),onClick:t[8]||(t[8]=e=>u.navigateTo("packages"))},[(0,i.bF)(h,{icon:"iconoir:packages",width:"24px",height:"24px"}),t[21]||(t[21]=(0,i.eW)(" Packages "))],2)):(0,i.Q3)("",!0)]),(0,i.Lk)("button",{onClick:t[9]||(t[9]=(...e)=>u.logout&&u.logout(...e)),class:"logout-btn"},"Logout")])):(0,i.Q3)("",!0),(0,i.Lk)("div",{class:(0,n.C4)(["content",{"full-width":!d.showSidebar}])},[(0,i.bF)(m)],2)])}o(4114);var u=o(2484),h={components:{Icon:u.In},data(){return{showSidebar:!0,activeTab:"customers"}},computed:{role(){return this.$store.state.role}},watch:{$route(e){this.showSidebar="/login"!==e.path,this.updateActiveTab(e.path)}},created(){this.showSidebar="/login"!==this.$route.path,this.updateActiveTab(this.$route.path)},methods:{showTab(e){return"ceo"===this.role||("branch_manager"===this.role?["customers","bookings","appointments","rooms","kitchen-items","employees"].includes(e):"receptionist"===this.role&&["customers","bookings","appointments","rooms"].includes(e))},logout(){this.$store.commit("setRole",null),this.$router.push("/login")},navigateTo(e){this.$router.push(`/${e}`),this.activeTab=e},updateActiveTab(e){const t=e.split("/")[1];t&&(this.activeTab=t)}}},m=o(1241);const p=(0,m.A)(h,[["render",d]]);var k=p,b=o(1387);const g={class:"login-container"},L={class:"logo"},v=["src"],y={class:"login-form"};function C(e,t,n,s,l,r){return(0,i.uX)(),(0,i.CE)("div",g,[(0,i.Lk)("div",L,[(0,i.Lk)("img",{src:o(7335),alt:"Logo"},null,8,v)]),(0,i.Lk)("div",y,[t[4]||(t[4]=(0,i.Lk)("h2",null,"Enter Your Credentials..",-1)),(0,i.Lk)("form",{onSubmit:t[2]||(t[2]=(0,a.D$)(((...e)=>r.login&&r.login(...e)),["prevent"]))},[(0,i.bo)((0,i.Lk)("input",{type:"text",placeholder:"National ID","onUpdate:modelValue":t[0]||(t[0]=e=>l.username=e)},null,512),[[a.Jo,l.username]]),(0,i.bo)((0,i.Lk)("input",{type:"password",placeholder:"Password","onUpdate:modelValue":t[1]||(t[1]=e=>l.password=e)},null,512),[[a.Jo,l.password]]),t[3]||(t[3]=(0,i.Lk)("button",{type:"submit"},"Login",-1))],32)])])}var f={data(){return{username:"",password:""}},methods:{async login(){try{const e=await fetch("http://localhost:3000/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({national_id:this.username,password:this.password})}),t=await e.json();e.ok?(this.$store.commit("setRole",t.role),this.$router.push("/home")):alert(t.message||"Login failed")}catch(e){console.error("Error during login:",e),alert("An error occurred during login")}}}};const w=(0,m.A)(f,[["render",C],["__scopeId","data-v-d73da852"]]);var I=w;const D={class:"home-container"};function P(e,t,o,a,n,s){return(0,i.uX)(),(0,i.CE)("div",D,t[0]||(t[0]=[(0,i.Lk)("h1",null,"Welcome to Comma Dashboard",-1)]))}var _={};const E=(0,m.A)(_,[["render",P],["__scopeId","data-v-2c15cfcd"]]);var x=E;const F={class:"customers-container"},A={class:"header"},B={class:"buttons"},T={class:"customer-count"},R={class:"search-fields"},N={class:"custom-table"},S=["onClick"],U=["onClick"],V={class:"pagination"},X=["disabled"],J=["disabled"],O={key:0,class:"dialog-overlay"},W={class:"dialog"},q={class:"form-group"},$={for:"name"},Q={class:"form-group"},j={for:"email"},K={class:"form-group"},M={for:"phone"},Y={class:"form-group"},G={for:"nationalId"},H={class:"form-actions"},z={key:1,class:"dialog-overlay"},Z={class:"dialog"},ee={class:"form-group"},te={for:"edit-name"},oe={class:"form-group"},ae={for:"edit-email"},ie={class:"form-group"},ne={for:"edit-phone"},se={class:"form-group"},le={for:"edit-nationalId"},re={class:"form-group"},ce={for:"edit-warnings"},de={class:"form-actions"},ue={key:2,class:"dialog-overlay"},he={class:"dialog"},me={class:"form-actions"},pe={key:3,class:"dialog-overlay"},ke={class:"dialog"},be={class:"form-actions"};function ge(e,t,o,s,l,r){const c=(0,i.g2)("Icon");return(0,i.uX)(),(0,i.CE)("div",F,[(0,i.Lk)("div",A,[(0,i.Lk)("div",B,[(0,i.Lk)("button",{class:"btn-primary",onClick:t[0]||(t[0]=e=>l.showAddCustomerForm=!0)}," Add New Customer "),(0,i.Lk)("button",{class:"btn-success",onClick:t[1]||(t[1]=(...e)=>r.handleImportExcel&&r.handleImportExcel(...e)),style:{"background-color":"#ffd700",color:"black"}}," Add Group of Customers ")]),(0,i.Lk)("span",T,"No. Customers: "+(0,n.v_)(l.customers.length),1)]),(0,i.Lk)("div",R,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>l.search.id=e),placeholder:"Search by ID",class:"search-input"},null,512),[[a.Jo,l.search.id]]),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>l.search.phone=e),placeholder:"Search by Phone",class:"search-input"},null,512),[[a.Jo,l.search.phone]]),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.search.nationalId=e),placeholder:"Search by National ID",class:"search-input"},null,512),[[a.Jo,l.search.nationalId]])]),(0,i.Lk)("table",N,[t[25]||(t[25]=(0,i.Lk)("thead",null,[(0,i.Lk)("tr",null,[(0,i.Lk)("th",null,"ID"),(0,i.Lk)("th",null,"Email"),(0,i.Lk)("th",null,"Name"),(0,i.Lk)("th",null,"Phone Number"),(0,i.Lk)("th",null,"National ID"),(0,i.Lk)("th",null,"No. Warnings"),(0,i.Lk)("th",null,"Blacklisted"),(0,i.Lk)("th",null,"Actions")])],-1)),(0,i.Lk)("tbody",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.paginatedCustomers,(e=>((0,i.uX)(),(0,i.CE)("tr",{key:e.id},[(0,i.Lk)("td",null,(0,n.v_)(e.id),1),(0,i.Lk)("td",null,(0,n.v_)(e.email),1),(0,i.Lk)("td",null,(0,n.v_)(e.name),1),(0,i.Lk)("td",null,(0,n.v_)(e.phone),1),(0,i.Lk)("td",null,(0,n.v_)(e.nationalId),1),(0,i.Lk)("td",null,(0,n.v_)(e.warnings),1),(0,i.Lk)("td",null,[(0,i.Lk)("span",{class:(0,n.C4)(["blacklist-tag",e.warnings>=3?"danger":"success"])},(0,n.v_)(e.blacklisted),3)]),(0,i.Lk)("td",null,[(0,i.Lk)("button",{class:"btn-edit",onClick:t=>r.editCustomer(e)}," Edit ",8,S),(0,i.Lk)("button",{class:"btn-delete",onClick:t=>r.confirmDelete(e)}," Delete ",8,U)])])))),128))])]),(0,i.Lk)("div",V,[(0,i.Lk)("button",{onClick:t[5]||(t[5]=(...e)=>r.previousPage&&r.previousPage(...e)),disabled:1===l.currentPage}," Previous ",8,X),(0,i.Lk)("span",null,"Page "+(0,n.v_)(l.currentPage)+" of "+(0,n.v_)(r.totalPages),1),(0,i.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>r.nextPage&&r.nextPage(...e)),disabled:l.currentPage===r.totalPages}," Next ",8,J)]),l.showAddCustomerForm?((0,i.uX)(),(0,i.CE)("div",O,[(0,i.Lk)("div",W,[(0,i.Lk)("h2",null,[(0,i.bF)(c,{icon:"solar:user-plus-bold-duotone",width:"30px",height:"30px"}),t[26]||(t[26]=(0,i.eW)(" Add New Customer "))]),(0,i.Lk)("form",{onSubmit:t[12]||(t[12]=(0,a.D$)(((...e)=>r.addCustomer&&r.addCustomer(...e)),["prevent"])),class:"customers-form"},[(0,i.Lk)("div",q,[(0,i.Lk)("label",$,[(0,i.bF)(c,{icon:"icon-park-solid:edit-name",width:"24px",height:"24px"}),t[27]||(t[27]=(0,i.eW)(" Name: "))]),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>l.newCustomer.name=e),id:"name",required:""},null,512),[[a.Jo,l.newCustomer.name]])]),(0,i.Lk)("div",Q,[(0,i.Lk)("label",j,[(0,i.bF)(c,{icon:"material-symbols:mail-outline",width:"24px",height:"24px"}),t[28]||(t[28]=(0,i.eW)(" Email: "))]),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>l.newCustomer.email=e),id:"email",type:"email",required:""},null,512),[[a.Jo,l.newCustomer.email]])]),(0,i.Lk)("div",K,[(0,i.Lk)("label",M,[(0,i.bF)(c,{icon:"mingcute:phone-line",width:"24px",height:"24px"}),t[29]||(t[29]=(0,i.eW)(" Phone: "))]),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>l.newCustomer.phone=e),id:"phone",required:""},null,512),[[a.Jo,l.newCustomer.phone]])]),(0,i.Lk)("div",Y,[(0,i.Lk)("label",G,[(0,i.bF)(c,{icon:"teenyicons:id-solid",width:"24px",height:"24px"}),t[30]||(t[30]=(0,i.eW)(" National ID: "))]),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>l.newCustomer.nationalId=e),id:"nationalId",required:""},null,512),[[a.Jo,l.newCustomer.nationalId]])]),(0,i.Lk)("div",H,[(0,i.Lk)("button",{type:"button",onClick:t[11]||(t[11]=e=>l.showAddCustomerForm=!1)}," Cancel "),t[31]||(t[31]=(0,i.Lk)("button",{type:"submit"},"Save",-1))])],32)])])):(0,i.Q3)("",!0),l.showEditCustomerForm?((0,i.uX)(),(0,i.CE)("div",z,[(0,i.Lk)("div",Z,[(0,i.Lk)("h2",null,[(0,i.bF)(c,{icon:"material-symbols:edit",width:"30px",height:"30px"}),t[32]||(t[32]=(0,i.eW)(" Edit Customer "))]),(0,i.Lk)("form",{onSubmit:t[19]||(t[19]=(0,a.D$)(((...e)=>r.saveEditedCustomer&&r.saveEditedCustomer(...e)),["prevent"])),class:"customers-form"},[(0,i.Lk)("div",ee,[(0,i.Lk)("label",te,[(0,i.bF)(c,{icon:"icon-park-solid:edit-name",width:"24px",height:"24px"}),t[33]||(t[33]=(0,i.eW)(" Name: "))]),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[13]||(t[13]=e=>l.editCustomerData.name=e),id:"edit-name",required:""},null,512),[[a.Jo,l.editCustomerData.name]])]),(0,i.Lk)("div",oe,[(0,i.Lk)("label",ae,[(0,i.bF)(c,{icon:"material-symbols:mail-outline",width:"24px",height:"24px"}),t[34]||(t[34]=(0,i.eW)(" Email: "))]),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[14]||(t[14]=e=>l.editCustomerData.email=e),id:"edit-email",type:"email",required:""},null,512),[[a.Jo,l.editCustomerData.email]])]),(0,i.Lk)("div",ie,[(0,i.Lk)("label",ne,[(0,i.bF)(c,{icon:"mingcute:phone-line",width:"24px",height:"24px"}),t[35]||(t[35]=(0,i.eW)(" Phone: "))]),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[15]||(t[15]=e=>l.editCustomerData.phone=e),id:"edit-phone",required:""},null,512),[[a.Jo,l.editCustomerData.phone]])]),(0,i.Lk)("div",se,[(0,i.Lk)("label",le,[(0,i.bF)(c,{icon:"teenyicons:id-solid",width:"24px",height:"24px"}),t[36]||(t[36]=(0,i.eW)(" National ID: "))]),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[16]||(t[16]=e=>l.editCustomerData.nationalId=e),id:"edit-nationalId",required:""},null,512),[[a.Jo,l.editCustomerData.nationalId]])]),(0,i.Lk)("div",re,[(0,i.Lk)("label",ce,[(0,i.bF)(c,{icon:"material-symbols:warning",width:"24px",height:"24px"}),t[37]||(t[37]=(0,i.eW)(" No. Warnings: "))]),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[17]||(t[17]=e=>l.editCustomerData.warnings=e),id:"edit-warnings",type:"number",required:""},null,512),[[a.Jo,l.editCustomerData.warnings]])]),(0,i.Lk)("div",de,[(0,i.Lk)("button",{type:"button",onClick:t[18]||(t[18]=e=>l.showEditCustomerForm=!1)}," Cancel "),t[38]||(t[38]=(0,i.Lk)("button",{type:"submit"},"Save Changes",-1))])],32)])])):(0,i.Q3)("",!0),l.showDeleteConfirmation?((0,i.uX)(),(0,i.CE)("div",ue,[(0,i.Lk)("div",he,[(0,i.Lk)("h2",null,[(0,i.bF)(c,{icon:"uiw:user-delete",width:"26px",height:"26px"}),t[39]||(t[39]=(0,i.eW)(" Confirm Delete "))]),t[40]||(t[40]=(0,i.Lk)("p",{style:{color:"black"}}," Are you sure you want to delete this customer? ",-1)),(0,i.Lk)("div",me,[(0,i.Lk)("button",{type:"button",onClick:t[20]||(t[20]=e=>l.showDeleteConfirmation=!1)}," Cancel "),(0,i.Lk)("button",{type:"button",onClick:t[21]||(t[21]=(...e)=>r.deleteCustomerConfirmed&&r.deleteCustomerConfirmed(...e)),class:"btn-delete"}," Delete ")])])])):(0,i.Q3)("",!0),l.showExcelImportDialog?((0,i.uX)(),(0,i.CE)("div",pe,[(0,i.Lk)("div",ke,[t[41]||(t[41]=(0,i.Lk)("h2",null,"Import Customers from Excel",-1)),(0,i.Lk)("input",{type:"file",onChange:t[22]||(t[22]=(...e)=>r.handleFileUpload&&r.handleFileUpload(...e)),accept:".xlsx, .xls"},null,32),(0,i.Lk)("div",be,[(0,i.Lk)("button",{type:"button",onClick:t[23]||(t[23]=e=>l.showExcelImportDialog=!1)}," Cancel "),(0,i.Lk)("button",{type:"button",onClick:t[24]||(t[24]=(...e)=>r.processExcelFile&&r.processExcelFile(...e)),class:"btn-success"}," Import ")])])])):(0,i.Q3)("",!0)])}o(8992),o(4520),o(1454);var Le=o(4373),ve={data(){return{customers:[],search:{id:"",phone:"",nationalId:""},showAddCustomerForm:!1,showEditCustomerForm:!1,showDeleteConfirmation:!1,showExcelImportDialog:!1,customerToDelete:null,customerToEdit:null,excelFile:null,newCustomer:{id:"",name:"",email:"",phone:"",nationalId:"",warnings:0,isActive:1},editCustomerData:{id:"",name:"",email:"",phone:"",nationalId:"",warnings:0,isActive:1},currentPage:1,itemsPerPage:10}},components:{Icon:u.In},computed:{filteredCustomers(){return this.customers.filter((e=>(e.id?.toString()||"").includes(this.search.id)&&(e.phone?.toString()||"").includes(this.search.phone)&&(e.nationalId?.toString()||"").includes(this.search.nationalId)))},paginatedCustomers(){const e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;return this.filteredCustomers.slice(e,t)},totalPages(){return Math.ceil(this.filteredCustomers.length/this.itemsPerPage)}},async created(){await this.fetchCustomers()},methods:{async fetchCustomers(){try{const e=await Le.A.get("http://localhost:3000/api/customers");console.log("API Response:",e.data),this.customers=e.data.map((e=>({id:e.id,name:e.name,email:e.email,phone:e.phone,nationalId:e.national_id,warnings:e.warnings,isActive:e.is_active,blacklisted:e.warnings>=3?"Yes":"No"})))}catch(e){console.error("Error fetching customers:",e)}},async addCustomer(){try{const e={name:this.newCustomer.name,email:this.newCustomer.email,phone:this.newCustomer.phone,national_id:this.newCustomer.nationalId,warnings:this.newCustomer.warnings,is_active:1===this.newCustomer.isActive},t=await Le.A.post("http://localhost:3000/api/customers",e);console.log("API Response:",t.data),this.customers.push({id:t.data.id,name:t.data.name,email:t.data.email,phone:t.data.phone,nationalId:t.data.national_id,warnings:t.data.warnings,isActive:t.data.is_active?1:0,blacklisted:t.data.warnings>=3?"Yes":"No"}),this.showAddCustomerForm=!1,this.resetNewCustomer()}catch(e){console.error("Error adding customer:",e),alert("Failed to add customer. Please try again.")}},resetNewCustomer(){this.newCustomer={id:"",name:"",email:"",phone:"",nationalId:"",warnings:0,isActive:1}},editCustomer(e){this.customerToEdit=e,this.editCustomerData={...e},this.showEditCustomerForm=!0},async saveEditedCustomer(){try{const e={name:this.editCustomerData.name,email:this.editCustomerData.email,phone:this.editCustomerData.phone,national_id:this.editCustomerData.nationalId,warnings:this.editCustomerData.warnings,is_active:1===this.editCustomerData.isActive},t=await Le.A.put(`http://localhost:3000/api/customers/${this.editCustomerData.id}`,e);console.log("API Response:",t.data);const o=this.customers.findIndex((e=>e.id===this.editCustomerData.id));-1!==o&&(this.customers[o]={...this.editCustomerData,nationalId:t.data.national_id,isActive:t.data.is_active?1:0,blacklisted:t.data.warnings>=3?"Yes":"No"}),this.showEditCustomerForm=!1}catch(e){console.error("Error updating customer:",e),alert("Failed to update customer. Please try again.")}},confirmDelete(e){this.customerToDelete=e,this.showDeleteConfirmation=!0},async deleteCustomerConfirmed(){try{const e=await Le.A.delete(`http://localhost:3000/api/customers/${this.customerToDelete.id}`);console.log("API Response:",e.data),this.customers=this.customers.filter((e=>e.id!==this.customerToDelete.id)),this.showDeleteConfirmation=!1}catch(e){console.error("Error deleting customer:",e),alert("Failed to delete customer. Please try again.")}},handleImportExcel(){this.showExcelImportDialog=!0},handleFileUpload(e){this.excelFile=e.target.files[0]},async processExcelFile(){if(!this.excelFile)return void alert("Please select a file.");const e=new FormData;e.append("file",this.excelFile);try{const t=await Le.A.post("http://localhost:3000/api/customers/upload",e,{headers:{"Content-Type":"multipart/form-data"}});console.log("API Response:",t.data);const o=t.data.customers.map((e=>({id:e.id,name:e.name,email:e.email,phone:e.phone,nationalId:e.national_id,warnings:e.warnings,isActive:e.is_active?1:0,blacklisted:e.warnings>=3?"Yes":"No"})));this.customers=[...this.customers,...o],this.showExcelImportDialog=!1}catch(t){console.error("Error uploading file:",t),alert("Failed to import customers. Please check the file and try again.")}},previousPage(){this.currentPage>1&&this.currentPage--},nextPage(){this.currentPage<this.totalPages&&this.currentPage++}}};const ye=(0,m.A)(ve,[["render",ge],["__scopeId","data-v-e3416ca0"]]);var Ce=ye;const fe={class:"branches-container"},we={class:"header"},Ie={class:"buttons"},De={class:"branch-count"},Pe={class:"custom-table"},_e=["href"],Ee=["onClick"],xe=["onClick"],Fe={key:0},Ae={key:0,class:"dialog-overlay"},Be={class:"dialog"},Te={class:"form-group"},Re={class:"form-group"},Ne={class:"form-group"},Se={class:"form-group"},Ue={class:"form-group"},Ve={class:"form-group"},Xe={class:"form-actions"},Je={key:1,class:"dialog-overlay"},Oe={class:"dialog"},We={class:"form-group"},qe={class:"form-group"},$e={class:"form-group"},Qe={class:"form-group"},je={class:"form-group"},Ke={class:"form-group"},Me={class:"form-actions"},Ye={key:2,class:"dialog-overlay"},Ge={class:"dialog"},He={class:"form-actions"};function ze(e,t,o,s,l,r){return(0,i.uX)(),(0,i.CE)("div",fe,[(0,i.Lk)("div",we,[(0,i.Lk)("div",Ie,[(0,i.Lk)("button",{class:"btn-primary",onClick:t[0]||(t[0]=e=>l.showAddBranchForm=!0)}," Add New Branch ")]),(0,i.Lk)("span",De,"No. Branches: "+(0,n.v_)(l.branches.length),1)]),(0,i.Lk)("table",Pe,[t[20]||(t[20]=(0,i.Lk)("thead",null,[(0,i.Lk)("tr",null,[(0,i.Lk)("th",null,"Name"),(0,i.Lk)("th",null,"Location"),(0,i.Lk)("th",null,"Phone Number"),(0,i.Lk)("th",null,"Rooms Count"),(0,i.Lk)("th",null,"Employees Count"),(0,i.Lk)("th",null,"Customers Count"),(0,i.Lk)("th",null,"Actions")])],-1)),(0,i.Lk)("tbody",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.paginatedBranches,(e=>((0,i.uX)(),(0,i.CE)("tr",{key:e.id},[(0,i.Lk)("td",null,(0,n.v_)(e.name),1),(0,i.Lk)("td",null,[(0,i.Lk)("a",{href:e.location,target:"_blank"},(0,n.v_)(e.location),9,_e)]),(0,i.Lk)("td",null,(0,n.v_)(e.phone),1),(0,i.Lk)("td",null,(0,n.v_)(e.rooms_count),1),(0,i.Lk)("td",null,(0,n.v_)(e.employees_count),1),(0,i.Lk)("td",null,(0,n.v_)(e.customers_count),1),(0,i.Lk)("td",null,[(0,i.Lk)("button",{class:"btn-edit",onClick:t=>r.editBranch(e)},"Edit",8,Ee),(0,i.Lk)("button",{class:"btn-delete",onClick:t=>r.confirmDelete(e)}," Delete ",8,xe)])])))),128)),0===r.paginatedBranches.length?((0,i.uX)(),(0,i.CE)("tr",Fe,t[19]||(t[19]=[(0,i.Lk)("td",{colspan:"7",class:"no-results"},"No results found.",-1)]))):(0,i.Q3)("",!0)])]),l.showAddBranchForm?((0,i.uX)(),(0,i.CE)("div",Ae,[(0,i.Lk)("div",Be,[t[28]||(t[28]=(0,i.Lk)("h2",null,"Add New Branch",-1)),(0,i.Lk)("form",{onSubmit:t[8]||(t[8]=(0,a.D$)(((...e)=>r.addBranch&&r.addBranch(...e)),["prevent"])),class:"branches-form"},[(0,i.Lk)("div",Te,[t[21]||(t[21]=(0,i.Lk)("label",{for:"name"},"Name:",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.newBranch.name=e),id:"name",required:""},null,512),[[a.Jo,l.newBranch.name]])]),(0,i.Lk)("div",Re,[t[22]||(t[22]=(0,i.Lk)("label",{for:"location"},"Location:",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>l.newBranch.location=e),id:"location",required:""},null,512),[[a.Jo,l.newBranch.location]])]),(0,i.Lk)("div",Ne,[t[23]||(t[23]=(0,i.Lk)("label",{for:"phone"},"Phone Number:",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>l.newBranch.phone=e),id:"phone",required:""},null,512),[[a.Jo,l.newBranch.phone]])]),(0,i.Lk)("div",Se,[t[24]||(t[24]=(0,i.Lk)("label",{for:"roomsCount"},"Rooms Count:",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.newBranch.rooms_count=e),id:"roomsCount",type:"number",required:""},null,512),[[a.Jo,l.newBranch.rooms_count]])]),(0,i.Lk)("div",Ue,[t[25]||(t[25]=(0,i.Lk)("label",{for:"employeesCount"},"Employees Count:",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>l.newBranch.employees_count=e),id:"employeesCount",type:"number",required:""},null,512),[[a.Jo,l.newBranch.employees_count]])]),(0,i.Lk)("div",Ve,[t[26]||(t[26]=(0,i.Lk)("label",{for:"customersCount"},"Customers Count:",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>l.newBranch.customers_count=e),id:"customersCount",type:"number",required:""},null,512),[[a.Jo,l.newBranch.customers_count]])]),(0,i.Lk)("div",Xe,[(0,i.Lk)("button",{type:"button",onClick:t[7]||(t[7]=e=>l.showAddBranchForm=!1)}," Cancel "),t[27]||(t[27]=(0,i.Lk)("button",{type:"submit"},"Save",-1))])],32)])])):(0,i.Q3)("",!0),l.showEditBranchForm?((0,i.uX)(),(0,i.CE)("div",Je,[(0,i.Lk)("div",Oe,[t[36]||(t[36]=(0,i.Lk)("h2",null,"Edit Branch",-1)),(0,i.Lk)("form",{onSubmit:t[16]||(t[16]=(0,a.D$)(((...e)=>r.saveEditedBranch&&r.saveEditedBranch(...e)),["prevent"])),class:"branches-form"},[(0,i.Lk)("div",We,[t[29]||(t[29]=(0,i.Lk)("label",{for:"edit-name"},"Name:",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>l.editBranchData.name=e),id:"edit-name"},null,512),[[a.Jo,l.editBranchData.name]])]),(0,i.Lk)("div",qe,[t[30]||(t[30]=(0,i.Lk)("label",{for:"edit-location"},"Location:",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>l.editBranchData.location=e),id:"edit-location"},null,512),[[a.Jo,l.editBranchData.location]])]),(0,i.Lk)("div",$e,[t[31]||(t[31]=(0,i.Lk)("label",{for:"edit-phone"},"Phone Number:",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>l.editBranchData.phone=e),id:"edit-phone"},null,512),[[a.Jo,l.editBranchData.phone]])]),(0,i.Lk)("div",Qe,[t[32]||(t[32]=(0,i.Lk)("label",{for:"edit-roomsCount"},"Rooms Count:",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[12]||(t[12]=e=>l.editBranchData.rooms_count=e),id:"edit-roomsCount",type:"number"},null,512),[[a.Jo,l.editBranchData.rooms_count]])]),(0,i.Lk)("div",je,[t[33]||(t[33]=(0,i.Lk)("label",{for:"edit-employeesCount"},"Employees Count:",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[13]||(t[13]=e=>l.editBranchData.employees_count=e),id:"edit-employeesCount",type:"number"},null,512),[[a.Jo,l.editBranchData.employees_count]])]),(0,i.Lk)("div",Ke,[t[34]||(t[34]=(0,i.Lk)("label",{for:"edit-customersCount"},"Customers Count:",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[14]||(t[14]=e=>l.editBranchData.customers_count=e),id:"edit-customersCount",type:"number"},null,512),[[a.Jo,l.editBranchData.customers_count]])]),(0,i.Lk)("div",Me,[(0,i.Lk)("button",{type:"button",onClick:t[15]||(t[15]=e=>l.showEditBranchForm=!1)}," Cancel "),t[35]||(t[35]=(0,i.Lk)("button",{type:"submit"},"Save Changes",-1))])],32)])])):(0,i.Q3)("",!0),l.showDeleteConfirmation?((0,i.uX)(),(0,i.CE)("div",Ye,[(0,i.Lk)("div",Ge,[t[37]||(t[37]=(0,i.Lk)("h2",null,"Confirm Delete",-1)),t[38]||(t[38]=(0,i.Lk)("p",null,"Are you sure you want to delete this branch?",-1)),(0,i.Lk)("div",He,[(0,i.Lk)("button",{type:"button",onClick:t[17]||(t[17]=e=>l.showDeleteConfirmation=!1)}," Cancel "),(0,i.Lk)("button",{type:"button",onClick:t[18]||(t[18]=(...e)=>r.deleteBranchConfirmed&&r.deleteBranchConfirmed(...e)),class:"btn-delete"}," Delete ")])])])):(0,i.Q3)("",!0)])}var Ze={data(){return{branches:[],search:{name:"",location:"",phone:""},showAddBranchForm:!1,showEditBranchForm:!1,showDeleteConfirmation:!1,branchToDelete:null,branchToEdit:null,newBranch:{id:"",name:"",location:"",phone:"",rooms_count:0,employees_count:0,customers_count:0},editBranchData:{id:"",name:"",location:"",phone:"",rooms_count:0,employees_count:0,customers_count:0},currentPage:1,itemsPerPage:10}},computed:{filteredBranches(){return this.branches.filter((e=>e.name.toLowerCase().includes(this.search.name.toLowerCase())&&e.location.toLowerCase().includes(this.search.location.toLowerCase())&&e.phone.includes(this.search.phone)))},paginatedBranches(){const e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;return this.filteredBranches.slice(e,t)},totalPages(){return Math.ceil(this.filteredBranches.length/this.itemsPerPage)}},async created(){await this.fetchBranches()},methods:{async fetchBranches(){try{const e=await Le.A.get("http://localhost:3000/api/branches");this.branches=e.data}catch(e){console.error("Error fetching branches:",e),alert("Failed to fetch branches. Please try again.")}},async addBranch(){try{const e={name:this.newBranch.name,location:this.newBranch.location,phone:this.newBranch.phone,rooms_count:this.newBranch.rooms_count,employees_count:this.newBranch.employees_count,customers_count:this.newBranch.customers_count},t=await Le.A.post("http://localhost:3000/api/branches",e);this.branches.push(t.data),this.showAddBranchForm=!1,this.resetNewBranch()}catch(e){console.error("Error adding branch:",e),alert("Failed to add branch. Please try again.")}},resetNewBranch(){this.newBranch={id:"",name:"",location:"",phone:"",roomsCount:0,employeesCount:0,customersCount:0}},editBranch(e){this.branchToEdit=e,this.editBranchData={...e},this.showEditBranchForm=!0},async saveEditedBranch(){try{const e={name:this.editBranchData.name,location:this.editBranchData.location,phone:this.editBranchData.phone,rooms_count:this.editBranchData.rooms_count,employees_count:this.editBranchData.employees_count,customers_count:this.editBranchData.customers_count},t=await Le.A.put(`http://localhost:3000/api/branches/${this.editBranchData.id}`,e),o=this.branches.findIndex((e=>e.id===this.editBranchData.id));-1!==o&&(this.branches[o]=t.data),this.showEditBranchForm=!1}catch(e){console.error("Error updating branch:",e),alert("Failed to update branch. Please try again.")}},confirmDelete(e){this.branchToDelete=e,this.showDeleteConfirmation=!0},async deleteBranchConfirmed(){try{await Le.A.delete(`http://localhost:3000/api/branches/${this.branchToDelete.id}`),this.branches=this.branches.filter((e=>e.id!==this.branchToDelete.id)),this.showDeleteConfirmation=!1}catch(e){console.error("Error deleting branch:",e),alert("Failed to delete branch. Please try again.")}},previousPage(){this.currentPage>1&&this.currentPage--},nextPage(){this.currentPage<this.totalPages&&this.currentPage++}}};const et=(0,m.A)(Ze,[["render",ze],["__scopeId","data-v-4546ce45"]]);var tt=et;const ot={class:"rooms-container"},at={class:"header"},it={class:"room-count"},nt={class:"search-fields"},st={class:"custom-table"},lt=["onClick"],rt=["onClick"],ct={key:0},dt={class:"pagination"},ut=["disabled"],ht=["disabled"],mt={key:0,class:"dialog-overlay"},pt={class:"dialog"},kt={class:"form-group"},bt={class:"form-group"},gt={class:"form-group"},Lt={class:"form-group"},vt={class:"form-group"},yt={class:"form-group"},Ct={class:"form-actions"},ft={key:1,class:"dialog-overlay"},wt={class:"dialog"},It={class:"form-group"},Dt={class:"form-group"},Pt={class:"form-group"},_t={class:"form-group"},Et={class:"form-group"},xt={class:"form-group"},Ft={class:"form-actions"},At={key:2,class:"dialog-overlay"},Bt={class:"dialog"},Tt={class:"form-actions"};function Rt(e,t,o,s,l,r){return(0,i.uX)(),(0,i.CE)("div",ot,[(0,i.Lk)("div",at,[(0,i.Lk)("button",{class:"btn-primary",onClick:t[0]||(t[0]=e=>l.showAddRoomForm=!0)}," Add New Room "),(0,i.Lk)("span",it,"No. Rooms: "+(0,n.v_)(l.rooms.length),1)]),(0,i.Lk)("div",nt,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.search.id=e),placeholder:"Search With Search Id",class:"search-input"},null,512),[[a.Jo,l.search.id]])]),(0,i.Lk)("table",st,[t[23]||(t[23]=(0,i.Lk)("thead",null,[(0,i.Lk)("tr",null,[(0,i.Lk)("th",null,"ID"),(0,i.Lk)("th",null,"Name"),(0,i.Lk)("th",null,"Branch Name"),(0,i.Lk)("th",null,"Type"),(0,i.Lk)("th",null,"Capacity"),(0,i.Lk)("th",null,"Price"),(0,i.Lk)("th",null,"Price Type"),(0,i.Lk)("th",null,"Actions")])],-1)),(0,i.Lk)("tbody",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.paginatedRooms,(e=>((0,i.uX)(),(0,i.CE)("tr",{key:e.id},[(0,i.Lk)("td",null,(0,n.v_)(e.id),1),(0,i.Lk)("td",null,(0,n.v_)(e.name),1),(0,i.Lk)("td",null,(0,n.v_)(e.branch_name),1),(0,i.Lk)("td",null,(0,n.v_)(e.type),1),(0,i.Lk)("td",null,(0,n.v_)(e.capacity),1),(0,i.Lk)("td",null,(0,n.v_)(e.price),1),(0,i.Lk)("td",null,(0,n.v_)("hour"===e.price_type?"Per Hour":"Per Day"),1),(0,i.Lk)("td",null,[(0,i.Lk)("button",{class:"btn-edit",onClick:t=>r.editRoom(e)},"Edit",8,lt),(0,i.Lk)("button",{class:"btn-delete",onClick:t=>r.confirmDelete(e)}," Delete ",8,rt)])])))),128)),0===r.paginatedRooms.length?((0,i.uX)(),(0,i.CE)("tr",ct,t[22]||(t[22]=[(0,i.Lk)("td",{colspan:"8",class:"no-results"},"No results",-1)]))):(0,i.Q3)("",!0)])]),(0,i.Lk)("div",dt,[(0,i.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>r.previousPage&&r.previousPage(...e)),disabled:1===l.currentPage}," Previous ",8,ut),(0,i.Lk)("span",null,"Page "+(0,n.v_)(l.currentPage)+" of "+(0,n.v_)(r.totalPages),1),(0,i.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>r.nextPage&&r.nextPage(...e)),disabled:l.currentPage===r.totalPages}," Next ",8,ht)]),l.showAddRoomForm?((0,i.uX)(),(0,i.CE)("div",mt,[(0,i.Lk)("div",pt,[t[32]||(t[32]=(0,i.Lk)("h2",null,"Add New Room",-1)),(0,i.Lk)("form",{onSubmit:t[11]||(t[11]=(0,a.D$)(((...e)=>r.addRoom&&r.addRoom(...e)),["prevent"])),class:"rooms-form"},[(0,i.Lk)("div",kt,[t[24]||(t[24]=(0,i.Lk)("label",{for:"name"},"Name:",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.newRoom.name=e),id:"name",required:""},null,512),[[a.Jo,l.newRoom.name]])]),(0,i.Lk)("div",bt,[t[25]||(t[25]=(0,i.Lk)("label",{for:"branch_name"},"Branch Name:",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>l.newRoom.branch_name=e),id:"branch_name",required:""},null,512),[[a.Jo,l.newRoom.branch_name]])]),(0,i.Lk)("div",gt,[t[26]||(t[26]=(0,i.Lk)("label",{for:"type"},"Type:",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>l.newRoom.type=e),id:"type",required:""},null,512),[[a.Jo,l.newRoom.type]])]),(0,i.Lk)("div",Lt,[t[27]||(t[27]=(0,i.Lk)("label",{for:"capacity"},"Capacity:",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>l.newRoom.capacity=e),id:"capacity",type:"number",required:""},null,512),[[a.Jo,l.newRoom.capacity]])]),(0,i.Lk)("div",vt,[t[28]||(t[28]=(0,i.Lk)("label",{for:"price"},"Price:",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>l.newRoom.price=e),id:"price",type:"number",required:""},null,512),[[a.Jo,l.newRoom.price]])]),(0,i.Lk)("div",yt,[t[30]||(t[30]=(0,i.Lk)("label",{for:"price-type"},"Price Type:",-1)),(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":t[9]||(t[9]=e=>l.newRoom.price_type=e),id:"price-type",required:""},t[29]||(t[29]=[(0,i.Lk)("option",{value:"hour"},"Per Hour",-1),(0,i.Lk)("option",{value:"day"},"Per Day",-1)]),512),[[a.u1,l.newRoom.price_type]])]),(0,i.Lk)("div",Ct,[(0,i.Lk)("button",{type:"button",onClick:t[10]||(t[10]=e=>l.showAddRoomForm=!1)}," Cancel "),t[31]||(t[31]=(0,i.Lk)("button",{type:"submit"},"Save",-1))])],32)])])):(0,i.Q3)("",!0),l.showEditRoomForm?((0,i.uX)(),(0,i.CE)("div",ft,[(0,i.Lk)("div",wt,[t[41]||(t[41]=(0,i.Lk)("h2",null,"Edit Room",-1)),(0,i.Lk)("form",{onSubmit:t[19]||(t[19]=(0,a.D$)(((...e)=>r.saveEditedRoom&&r.saveEditedRoom(...e)),["prevent"])),class:"rooms-form"},[(0,i.Lk)("div",It,[t[33]||(t[33]=(0,i.Lk)("label",{for:"edit-name"},"Name:",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[12]||(t[12]=e=>l.editRoomData.name=e),id:"edit-name",required:""},null,512),[[a.Jo,l.editRoomData.name]])]),(0,i.Lk)("div",Dt,[t[34]||(t[34]=(0,i.Lk)("label",{for:"edit-branch_name"},"Branch Name:",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[13]||(t[13]=e=>l.editRoomData.branch_name=e),id:"edit-branch_name",required:""},null,512),[[a.Jo,l.editRoomData.branch_name]])]),(0,i.Lk)("div",Pt,[t[35]||(t[35]=(0,i.Lk)("label",{for:"edit-type"},"Type:",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[14]||(t[14]=e=>l.editRoomData.type=e),id:"edit-type",required:""},null,512),[[a.Jo,l.editRoomData.type]])]),(0,i.Lk)("div",_t,[t[36]||(t[36]=(0,i.Lk)("label",{for:"edit-capacity"},"Capacity:",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[15]||(t[15]=e=>l.editRoomData.capacity=e),id:"edit-capacity",type:"number",required:""},null,512),[[a.Jo,l.editRoomData.capacity]])]),(0,i.Lk)("div",Et,[t[37]||(t[37]=(0,i.Lk)("label",{for:"edit-price"},"Price:",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[16]||(t[16]=e=>l.editRoomData.price=e),id:"edit-price",type:"number",required:""},null,512),[[a.Jo,l.editRoomData.price]])]),(0,i.Lk)("div",xt,[t[39]||(t[39]=(0,i.Lk)("label",{for:"edit-price-type"},"Price Type:",-1)),(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":t[17]||(t[17]=e=>l.editRoomData.price_type=e),id:"edit-price-type",required:""},t[38]||(t[38]=[(0,i.Lk)("option",{value:"hour"},"Per Hour",-1),(0,i.Lk)("option",{value:"day"},"Per Day",-1)]),512),[[a.u1,l.editRoomData.price_type]])]),(0,i.Lk)("div",Ft,[(0,i.Lk)("button",{type:"button",onClick:t[18]||(t[18]=e=>l.showEditRoomForm=!1)}," Cancel "),t[40]||(t[40]=(0,i.Lk)("button",{type:"submit"},"Save Changes",-1))])],32)])])):(0,i.Q3)("",!0),l.showDeleteConfirmation?((0,i.uX)(),(0,i.CE)("div",At,[(0,i.Lk)("div",Bt,[t[42]||(t[42]=(0,i.Lk)("h2",null,"Confirm Delete",-1)),t[43]||(t[43]=(0,i.Lk)("p",null,"Are you sure you want to delete this room?",-1)),(0,i.Lk)("div",Tt,[(0,i.Lk)("button",{type:"button",onClick:t[20]||(t[20]=e=>l.showDeleteConfirmation=!1)}," Cancel "),(0,i.Lk)("button",{type:"button",onClick:t[21]||(t[21]=(...e)=>r.deleteRoomConfirmed&&r.deleteRoomConfirmed(...e)),class:"btn-delete"}," Delete ")])])])):(0,i.Q3)("",!0)])}var Nt={data(){return{rooms:[],search:{id:""},showAddRoomForm:!1,showEditRoomForm:!1,showDeleteConfirmation:!1,roomToDelete:null,roomToEdit:null,newRoom:{id:"",name:"",branch_name:"",type:"",capacity:0,price:0,price_type:"hour"},editRoomData:{id:"",name:"",branch_name:"",type:"",capacity:0,price:0,price_type:"hour"},currentPage:1,itemsPerPage:10}},computed:{filteredRooms(){return this.rooms.filter((e=>{const t=e.id?e.id.toString():"";return t.includes(this.search.id)}))},paginatedRooms(){const e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;return this.filteredRooms.slice(e,t)},totalPages(){return Math.ceil(this.filteredRooms.length/this.itemsPerPage)}},methods:{async fetchRooms(){try{const e=await fetch("http://localhost:3000/api/rooms");this.rooms=await e.json()}catch(e){console.error("Error fetching rooms:",e)}},async addRoom(){try{const e=await fetch("http://localhost:3000/api/rooms",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.newRoom)});if(!e.ok)throw new Error("Failed to add room");const t=await e.json();this.rooms.push(t),this.showAddRoomForm=!1,this.resetNewRoom()}catch(e){console.error("Error adding room:",e)}},resetNewRoom(){this.newRoom={id:"",name:"",branch_name:"",type:"",capacity:0,price:0,price_type:"hour"}},editRoom(e){this.roomToEdit=e,this.editRoomData={...e},this.showEditRoomForm=!0},async saveEditedRoom(){try{const e=await fetch(`http://localhost:3000/api/rooms/${this.roomToEdit.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.editRoomData)});if(!e.ok)throw new Error("Failed to update room");const t=await e.json(),o=this.rooms.findIndex((e=>e.id===t.id));-1!==o&&(this.rooms[o]=t),this.showEditRoomForm=!1}catch(e){console.error("Error updating room:",e)}},confirmDelete(e){this.roomToDelete=e,this.showDeleteConfirmation=!0},async deleteRoomConfirmed(){try{await fetch(`http://localhost:3000/api/rooms/${this.roomToDelete.id}`,{method:"DELETE"}),this.rooms=this.rooms.filter((e=>e.id!==this.roomToDelete.id)),this.showDeleteConfirmation=!1}catch(e){console.error("Error deleting room:",e)}},previousPage(){this.currentPage>1&&this.currentPage--},nextPage(){this.currentPage<this.totalPages&&this.currentPage++}},mounted(){this.fetchRooms()}};const St=(0,m.A)(Nt,[["render",Rt],["__scopeId","data-v-3fc1a6b0"]]);var Ut=St;const Vt={class:"bookings-container"},Xt={class:"header"},Jt={class:"buttons",style:{display:"flex","flex-direction":"row",gap:"10px"}},Ot={class:"booking-count"},Wt={class:"search-fields"},qt={class:"custom-table"},$t={key:0},Qt=["onClick"],jt={class:"pagination"},Kt=["disabled"],Mt=["disabled"],Yt={key:0,class:"dialog-overlay"},Gt={class:"dialog"},Ht={class:"form-group"},zt={for:"customerId"},Zt={key:0,class:"error-message"},eo={class:"form-group"},to={for:"room"},oo=["value"],ao={class:"form-actions"},io={key:1,class:"dialog-overlay"},no={class:"dialog"},so={class:"form-group"},lo={for:"checkOutCustomerId"},ro={class:"form-group"},co={for:"kitchenItems"},uo=["value"],ho={class:"form-actions"},mo={key:2,class:"dialog-overlay"},po={class:"dialog"},ko={class:"form-actions"};function bo(e,t,o,s,l,r){const c=(0,i.g2)("Icon");return(0,i.uX)(),(0,i.CE)("div",Vt,[(0,i.Lk)("div",Xt,[(0,i.Lk)("div",Jt,[(0,i.Lk)("button",{class:"btn-primary",onClick:t[0]||(t[0]=e=>l.showCheckInForm=!0)}," Check-In "),(0,i.Lk)("button",{class:"btn-success",onClick:t[1]||(t[1]=e=>l.showCheckOutForm=!0)}," Check-Out ")]),(0,i.Lk)("span",Ot,"No. Bookings: "+(0,n.v_)(l.bookings.length),1)]),(0,i.Lk)("div",Wt,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>l.search.name=e),placeholder:"Search by Name",class:"search-input"},null,512),[[a.Jo,l.search.name]]),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>l.search.nationalId=e),placeholder:"Search by National ID",class:"search-input"},null,512),[[a.Jo,l.search.nationalId]])]),(0,i.Lk)("table",qt,[t[18]||(t[18]=(0,i.Lk)("thead",null,[(0,i.Lk)("tr",null,[(0,i.Lk)("th",null,"Booking ID"),(0,i.Lk)("th",null,"Customer Name"),(0,i.Lk)("th",null,"Check-In Time"),(0,i.Lk)("th",null,"Check-Out Time"),(0,i.Lk)("th",null,"Total Cost"),(0,i.Lk)("th",null,"Total Time"),(0,i.Lk)("th",null,"Room"),(0,i.Lk)("th",null,"Actions")])],-1)),(0,i.Lk)("tbody",null,[0===l.bookings.length?((0,i.uX)(),(0,i.CE)("tr",$t,t[17]||(t[17]=[(0,i.Lk)("td",{colspan:"8",style:{"text-align":"center",color:"#888"}}," No check-ins found. ",-1)]))):(0,i.Q3)("",!0),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.paginatedBookings,(e=>((0,i.uX)(),(0,i.CE)("tr",{key:e.id},[(0,i.Lk)("td",null,(0,n.v_)(e.id),1),(0,i.Lk)("td",null,(0,n.v_)(e.customer_name),1),(0,i.Lk)("td",null,(0,n.v_)(r.formatDateTime(e.check_in_time)||"Not Checked In"),1),(0,i.Lk)("td",null,(0,n.v_)(r.formatDateTime(e.check_out_time)||"Not Checked Out"),1),(0,i.Lk)("td",null,(0,n.v_)(e.total_cost?`${e.total_cost} EGP`:"N/A"),1),(0,i.Lk)("td",null,(0,n.v_)(e.total_time?`${e.total_time} minutes`:"N/A"),1),(0,i.Lk)("td",null,(0,n.v_)(e.room||"N/A"),1),(0,i.Lk)("td",null,[e.check_out_time?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("button",{key:0,class:"btn-delete",onClick:t=>r.confirmDeleteBooking(e)}," Cancel Booking ",8,Qt))])])))),128))])]),(0,i.Lk)("div",jt,[(0,i.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>r.previousPage&&r.previousPage(...e)),disabled:1===l.currentPage}," Previous ",8,Kt),(0,i.Lk)("span",null,"Page "+(0,n.v_)(l.currentPage)+" of "+(0,n.v_)(r.totalPages),1),(0,i.Lk)("button",{onClick:t[5]||(t[5]=(...e)=>r.nextPage&&r.nextPage(...e)),disabled:l.currentPage===r.totalPages}," Next ",8,Mt)]),l.showCheckInForm?((0,i.uX)(),(0,i.CE)("div",Yt,[(0,i.Lk)("div",Gt,[(0,i.Lk)("h2",null,[(0,i.bF)(c,{icon:"mdi:login",width:"30px",height:"30px"}),t[19]||(t[19]=(0,i.eW)(" Check-In Customer "))]),(0,i.Lk)("form",{onSubmit:t[10]||(t[10]=(0,a.D$)(((...e)=>r.handleCheckIn&&r.handleCheckIn(...e)),["prevent"])),class:"bookings-form"},[(0,i.Lk)("div",Ht,[(0,i.Lk)("label",zt,[(0,i.bF)(c,{icon:"teenyicons:id-solid",width:"24px",height:"24px"}),t[20]||(t[20]=(0,i.eW)(" Customer ID:"))]),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>l.checkInData.customerId=e),id:"customerId",required:"",onInput:t[7]||(t[7]=(...e)=>r.validateCustomer&&r.validateCustomer(...e))},null,544),[[a.Jo,l.checkInData.customerId]]),l.customerError?((0,i.uX)(),(0,i.CE)("p",Zt,(0,n.v_)(l.customerError),1)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",eo,[(0,i.Lk)("label",to,[(0,i.bF)(c,{icon:"cil:room",width:"24px",height:"24px"}),t[21]||(t[21]=(0,i.eW)(" Room:"))]),(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":t[8]||(t[8]=e=>l.checkInData.room=e),id:"room",required:""},[t[22]||(t[22]=(0,i.Lk)("option",{value:"Shared Area"},"Shared Area",-1)),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(l.rooms,(e=>((0,i.uX)(),(0,i.CE)("option",{key:e.id,value:e.name},(0,n.v_)(e.name),9,oo)))),128))],512),[[a.u1,l.checkInData.room]])]),(0,i.Lk)("div",ao,[(0,i.Lk)("button",{type:"button",onClick:t[9]||(t[9]=e=>l.showCheckInForm=!1)}," Cancel "),t[23]||(t[23]=(0,i.Lk)("button",{type:"submit"},"Check-In",-1))])],32)])])):(0,i.Q3)("",!0),l.showCheckOutForm?((0,i.uX)(),(0,i.CE)("div",io,[(0,i.Lk)("div",no,[(0,i.Lk)("h2",null,[(0,i.bF)(c,{icon:"mdi:logout",width:"30px",height:"30px"}),t[24]||(t[24]=(0,i.eW)(" Check-Out Customer "))]),(0,i.Lk)("form",{onSubmit:t[14]||(t[14]=(0,a.D$)(((...e)=>r.handleCheckOut&&r.handleCheckOut(...e)),["prevent"])),class:"bookings-form"},[(0,i.Lk)("div",so,[(0,i.Lk)("label",lo,[(0,i.bF)(c,{icon:"teenyicons:id-solid",width:"24px",height:"24px"}),t[25]||(t[25]=(0,i.eW)(" Customer ID:"))]),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>l.checkOutData.customerId=e),id:"checkOutCustomerId",required:""},null,512),[[a.Jo,l.checkOutData.customerId]])]),(0,i.Lk)("div",ro,[(0,i.Lk)("label",co,[(0,i.bF)(c,{icon:"tabler:tools-kitchen-2",width:"24px",height:"24px"}),t[26]||(t[26]=(0,i.eW)(" Kitchen Items:"))]),(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":t[12]||(t[12]=e=>l.checkOutData.kitchenItems=e),id:"kitchenItems",multiple:""},[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(l.kitchenItems,(e=>((0,i.uX)(),(0,i.CE)("option",{key:e.id,value:e.id},(0,n.v_)(e.name)+" ("+(0,n.v_)(e.price)+" EGP) ",9,uo)))),128))],512),[[a.u1,l.checkOutData.kitchenItems]])]),(0,i.Lk)("div",ho,[(0,i.Lk)("button",{type:"button",onClick:t[13]||(t[13]=e=>l.showCheckOutForm=!1)}," Cancel "),t[27]||(t[27]=(0,i.Lk)("button",{type:"submit"},"Check-Out",-1))])],32)])])):(0,i.Q3)("",!0),l.showDeleteConfirmation?((0,i.uX)(),(0,i.CE)("div",mo,[(0,i.Lk)("div",po,[(0,i.Lk)("h2",null,[(0,i.bF)(c,{icon:"uiw:delete",width:"26px",height:"26px"}),t[28]||(t[28]=(0,i.eW)(" Confirm Delete "))]),t[29]||(t[29]=(0,i.Lk)("p",{style:{color:"black"}}," Are you sure you want to cancel this booking? ",-1)),(0,i.Lk)("div",ko,[(0,i.Lk)("button",{type:"button",onClick:t[15]||(t[15]=e=>l.showDeleteConfirmation=!1)}," Cancel "),(0,i.Lk)("button",{type:"button",onClick:t[16]||(t[16]=(...e)=>r.deleteBookingConfirmed&&r.deleteBookingConfirmed(...e)),class:"btn-delete"}," Delete ")])])])):(0,i.Q3)("",!0)])}o(2577);var go={data(){return{bookings:[],search:{name:"",nationalId:""},showCheckInForm:!1,showCheckOutForm:!1,showDeleteConfirmation:!1,bookingToDelete:null,rooms:[],kitchenItems:[],checkInData:{customerId:"",room:"Shared Area"},checkOutData:{customerId:"",kitchenItems:[]},customerError:"",currentPage:1,itemsPerPage:10}},components:{Icon:u.In},computed:{filteredBookings(){return this.bookings.filter((e=>{const t=e.customer_name||"",o=this.search.name||"",a=e.national_id||"",i=this.search.nationalId||"";return t.toLowerCase().includes(o.toLowerCase())&&a.includes(i)}))},paginatedBookings(){const e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;return this.filteredBookings.slice(e,t)},totalPages(){return Math.ceil(this.filteredBookings.length/this.itemsPerPage)}},async created(){await this.loadRooms(),await this.loadKitchenItems(),await this.loadBookings()},methods:{async loadRooms(){try{const e=await Le.A.get("http://localhost:3000/api/rooms");this.rooms=e.data}catch(e){console.error("Error loading rooms:",e)}},async loadKitchenItems(){try{const e=await Le.A.get("http://localhost:3000/api/kitchen-items");this.kitchenItems=e.data}catch(e){console.error("Error loading kitchen items:",e)}},async loadBookings(){try{const e=await Le.A.get("http://localhost:3000/api/bookings");this.bookings=e.data}catch(e){console.error("Error loading bookings:",e)}},async validateCustomer(){if(this.checkInData.customerId)try{const e=await Le.A.get(`http://localhost:3000/api/customers/${this.checkInData.customerId}`);e.data&&(this.customerError="",this.checkInData.customerName=e.data.name)}catch(e){e.response&&404===e.response.status?this.customerError="Customer does not exist":console.error("Error validating customer:",e)}else this.customerError=""},async handleCheckIn(){if(this.customerError)alert("Please fix the errors before submitting.");else try{const e={customer_id:this.checkInData.customerId,room:this.checkInData.room},t=await Le.A.post("http://localhost:3000/api/bookings/check-in",e);this.bookings.push(t.data),this.showCheckInForm=!1,this.resetCheckInData()}catch(e){console.error("Error checking in:",e),alert("Failed to check in. Please try again.")}},async handleCheckOut(){try{const e=this.bookings.find((e=>e.customer_id===this.checkOutData.customerId));if(!e)return void alert("Booking not found.");const t={kitchen_items:this.checkOutData.kitchenItems},o=await Le.A.put(`http://localhost:3000/api/bookings/check-out/${e.id}`,t);e.check_out_time=o.data.check_out_time,e.total_time=o.data.total_time,e.total_cost=o.data.total_cost,this.showCheckOutForm=!1,this.resetCheckOutData()}catch(e){console.error("Error checking out:",e),alert("Failed to check out. Please try again.")}},resetCheckInData(){this.checkInData={customerId:"",room:"Shared Area"},this.customerError=""},resetCheckOutData(){this.checkOutData={customerId:"",kitchenItems:[]}},confirmDeleteBooking(e){this.bookingToDelete=e,this.showDeleteConfirmation=!0},async deleteBookingConfirmed(){try{await Le.A.delete(`http://localhost:3000/api/bookings/${this.bookingToDelete.id}`),this.bookings=this.bookings.filter((e=>e.id!==this.bookingToDelete.id)),this.showDeleteConfirmation=!1}catch(e){console.error("Error deleting booking:",e),alert("Failed to delete booking. Please try again.")}},previousPage(){this.currentPage>1&&this.currentPage--},nextPage(){this.currentPage<this.totalPages&&this.currentPage++},formatDateTime(e){if(!e)return null;const t=new Date(e);return t.toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!0})}}};const Lo=(0,m.A)(go,[["render",bo],["__scopeId","data-v-49e96b58"]]);var vo=Lo;const yo={class:"kitchen-items-container"},Co={class:"header"},fo={class:"buttons",style:{display:"flex","flex-direction":"row",gap:"10px"}},wo={class:"item-count"},Io={class:"search-fields"},Do={class:"custom-table"},Po={key:0},_o=["onClick"],Eo=["onClick"],xo={class:"pagination"},Fo=["disabled"],Ao=["disabled"],Bo={key:0,class:"dialog-overlay"},To={class:"dialog"},Ro={class:"form-group"},No={for:"name"},So={class:"form-group"},Uo={for:"price"},Vo={class:"form-group"},Xo={for:"category"},Jo={class:"form-group"},Oo={for:"availability"},Wo={class:"form-actions"},qo={key:1,class:"dialog-overlay"},$o={class:"dialog"},Qo={class:"form-group"},jo={for:"edit-name"},Ko={class:"form-group"},Mo={for:"edit-price"},Yo={class:"form-group"},Go={for:"edit-category"},Ho={class:"form-group"},zo={for:"edit-availability"},Zo={class:"form-actions"},ea={key:2,class:"dialog-overlay"},ta={class:"dialog"},oa={class:"form-actions"},aa={key:3,class:"dialog-overlay"},ia={class:"dialog"},na={class:"form-actions"};function sa(e,t,o,s,l,r){const c=(0,i.g2)("Icon");return(0,i.uX)(),(0,i.CE)("div",yo,[(0,i.Lk)("div",Co,[(0,i.Lk)("div",fo,[(0,i.Lk)("button",{class:"btn-primary",onClick:t[0]||(t[0]=e=>l.showAddItemForm=!0)}," Add New Item "),(0,i.Lk)("button",{class:"btn-success",onClick:t[1]||(t[1]=e=>l.showExcelImportDialog=!0),style:{"background-color":"#ffd700",color:"black"}}," Add Bulk Items ")]),(0,i.Lk)("span",wo,"No. Items: "+(0,n.v_)(l.kitchenItems.length),1)]),(0,i.Lk)("div",Io,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>l.search.name=e),placeholder:"Search by Name",class:"search-input"},null,512),[[a.Jo,l.search.name]]),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>l.search.category=e),placeholder:"Search by Category",class:"search-input"},null,512),[[a.Jo,l.search.category]])]),(0,i.Lk)("table",Do,[t[24]||(t[24]=(0,i.Lk)("thead",null,[(0,i.Lk)("tr",null,[(0,i.Lk)("th",null,"Item ID"),(0,i.Lk)("th",null,"Item Name"),(0,i.Lk)("th",null,"Price"),(0,i.Lk)("th",null,"Category"),(0,i.Lk)("th",null,"Availability"),(0,i.Lk)("th",null,"Actions")])],-1)),(0,i.Lk)("tbody",null,[0===l.kitchenItems.length?((0,i.uX)(),(0,i.CE)("tr",Po,t[23]||(t[23]=[(0,i.Lk)("td",{colspan:"6",style:{"text-align":"center",color:"#888"}}," No items found. ",-1)]))):(0,i.Q3)("",!0),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.paginatedItems,(e=>((0,i.uX)(),(0,i.CE)("tr",{key:e.id},[(0,i.Lk)("td",null,(0,n.v_)(e.id),1),(0,i.Lk)("td",null,(0,n.v_)(e.name),1),(0,i.Lk)("td",null,(0,n.v_)(e.price)+" EGP",1),(0,i.Lk)("td",null,(0,n.v_)(e.category),1),(0,i.Lk)("td",null,[(0,i.Lk)("span",{class:(0,n.C4)(["availability-tag","Available"===e.availability?"success":"danger"])},(0,n.v_)(e.availability),3)]),(0,i.Lk)("td",null,[(0,i.Lk)("button",{class:"btn-edit",onClick:t=>r.editItem(e)},"Edit",8,_o),(0,i.Lk)("button",{class:"btn-delete",onClick:t=>r.confirmDeleteItem(e)}," Delete ",8,Eo)])])))),128))])]),(0,i.Lk)("div",xo,[(0,i.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>r.previousPage&&r.previousPage(...e)),disabled:1===l.currentPage}," Previous ",8,Fo),(0,i.Lk)("span",null,"Page "+(0,n.v_)(l.currentPage)+" of "+(0,n.v_)(r.totalPages),1),(0,i.Lk)("button",{onClick:t[5]||(t[5]=(...e)=>r.nextPage&&r.nextPage(...e)),disabled:l.currentPage===r.totalPages}," Next ",8,Ao)]),l.showAddItemForm?((0,i.uX)(),(0,i.CE)("div",Bo,[(0,i.Lk)("div",To,[(0,i.Lk)("h2",null,[(0,i.bF)(c,{icon:"mdi:food",width:"30px",height:"30px"}),t[25]||(t[25]=(0,i.eW)(" Add New Item "))]),(0,i.Lk)("form",{onSubmit:t[11]||(t[11]=(0,a.D$)(((...e)=>r.addItem&&r.addItem(...e)),["prevent"])),class:"items-form"},[(0,i.Lk)("div",Ro,[(0,i.Lk)("label",No,[(0,i.bF)(c,{icon:"mdi:label",width:"24px",height:"24px"}),t[26]||(t[26]=(0,i.eW)(" Item Name:"))]),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>l.newItem.name=e),id:"name",required:""},null,512),[[a.Jo,l.newItem.name]])]),(0,i.Lk)("div",So,[(0,i.Lk)("label",Uo,[(0,i.bF)(c,{icon:"mdi:cash",width:"24px",height:"24px"}),t[27]||(t[27]=(0,i.eW)(" Price:"))]),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>l.newItem.price=e),id:"price",type:"number",step:"0.01",required:""},null,512),[[a.Jo,l.newItem.price]])]),(0,i.Lk)("div",Vo,[(0,i.Lk)("label",Xo,[(0,i.bF)(c,{icon:"mdi:tag",width:"24px",height:"24px"}),t[28]||(t[28]=(0,i.eW)(" Category:"))]),(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":t[8]||(t[8]=e=>l.newItem.category=e),id:"category",required:""},t[29]||(t[29]=[(0,i.Lk)("option",{value:"Beverages"},"Beverages",-1),(0,i.Lk)("option",{value:"Snacks"},"Snacks",-1),(0,i.Lk)("option",{value:"Meals"},"Meals",-1),(0,i.Lk)("option",{value:"Desserts"},"Desserts",-1)]),512),[[a.u1,l.newItem.category]])]),(0,i.Lk)("div",Jo,[(0,i.Lk)("label",Oo,[(0,i.bF)(c,{icon:"mdi:check-circle",width:"24px",height:"24px"}),t[30]||(t[30]=(0,i.eW)(" Availability:"))]),(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":t[9]||(t[9]=e=>l.newItem.availability=e),id:"availability",required:""},t[31]||(t[31]=[(0,i.Lk)("option",{value:"Available"},"Available",-1),(0,i.Lk)("option",{value:"Out of Stock"},"Out of Stock",-1)]),512),[[a.u1,l.newItem.availability]])]),(0,i.Lk)("div",Wo,[(0,i.Lk)("button",{type:"button",onClick:t[10]||(t[10]=e=>l.showAddItemForm=!1)}," Cancel "),t[32]||(t[32]=(0,i.Lk)("button",{type:"submit"},"Save",-1))])],32)])])):(0,i.Q3)("",!0),l.showEditItemForm?((0,i.uX)(),(0,i.CE)("div",qo,[(0,i.Lk)("div",$o,[(0,i.Lk)("h2",null,[(0,i.bF)(c,{icon:"mdi:pencil",width:"30px",height:"30px"}),t[33]||(t[33]=(0,i.eW)(" Edit Item"))]),(0,i.Lk)("form",{onSubmit:t[17]||(t[17]=(0,a.D$)(((...e)=>r.saveEditedItem&&r.saveEditedItem(...e)),["prevent"])),class:"items-form"},[(0,i.Lk)("div",Qo,[(0,i.Lk)("label",jo,[(0,i.bF)(c,{icon:"mdi:label",width:"24px",height:"24px"}),t[34]||(t[34]=(0,i.eW)(" Item Name:"))]),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[12]||(t[12]=e=>l.editItemData.name=e),id:"edit-name",required:""},null,512),[[a.Jo,l.editItemData.name]])]),(0,i.Lk)("div",Ko,[(0,i.Lk)("label",Mo,[(0,i.bF)(c,{icon:"mdi:cash",width:"24px",height:"24px"}),t[35]||(t[35]=(0,i.eW)(" Price:"))]),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[13]||(t[13]=e=>l.editItemData.price=e),id:"edit-price",type:"number",step:"0.01",required:""},null,512),[[a.Jo,l.editItemData.price]])]),(0,i.Lk)("div",Yo,[(0,i.Lk)("label",Go,[(0,i.bF)(c,{icon:"mdi:tag",width:"24px",height:"24px"}),t[36]||(t[36]=(0,i.eW)(" Category:"))]),(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":t[14]||(t[14]=e=>l.editItemData.category=e),id:"edit-category",required:""},t[37]||(t[37]=[(0,i.Lk)("option",{value:"Beverages"},"Beverages",-1),(0,i.Lk)("option",{value:"Snacks"},"Snacks",-1),(0,i.Lk)("option",{value:"Meals"},"Meals",-1),(0,i.Lk)("option",{value:"Desserts"},"Desserts",-1)]),512),[[a.u1,l.editItemData.category]])]),(0,i.Lk)("div",Ho,[(0,i.Lk)("label",zo,[(0,i.bF)(c,{icon:"mdi:check-circle",width:"24px",height:"24px"}),t[38]||(t[38]=(0,i.eW)(" Availability:"))]),(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":t[15]||(t[15]=e=>l.editItemData.availability=e),id:"edit-availability",required:""},t[39]||(t[39]=[(0,i.Lk)("option",{value:"Available"},"Available",-1),(0,i.Lk)("option",{value:"Out of Stock"},"Out of Stock",-1)]),512),[[a.u1,l.editItemData.availability]])]),(0,i.Lk)("div",Zo,[(0,i.Lk)("button",{type:"button",onClick:t[16]||(t[16]=e=>l.showEditItemForm=!1)}," Cancel "),t[40]||(t[40]=(0,i.Lk)("button",{type:"submit"},"Save Changes",-1))])],32)])])):(0,i.Q3)("",!0),l.showDeleteConfirmation?((0,i.uX)(),(0,i.CE)("div",ea,[(0,i.Lk)("div",ta,[(0,i.Lk)("h2",null,[(0,i.bF)(c,{icon:"mdi:delete",width:"26px",height:"26px"}),t[41]||(t[41]=(0,i.eW)(" Confirm Delete "))]),t[42]||(t[42]=(0,i.Lk)("p",{style:{color:"black"}},"Are you sure you want to delete this item?",-1)),(0,i.Lk)("div",oa,[(0,i.Lk)("button",{type:"button",onClick:t[18]||(t[18]=e=>l.showDeleteConfirmation=!1)}," Cancel "),(0,i.Lk)("button",{type:"button",onClick:t[19]||(t[19]=(...e)=>r.deleteItemConfirmed&&r.deleteItemConfirmed(...e)),class:"btn-delete"}," Delete ")])])])):(0,i.Q3)("",!0),l.showExcelImportDialog?((0,i.uX)(),(0,i.CE)("div",aa,[(0,i.Lk)("div",ia,[t[43]||(t[43]=(0,i.Lk)("h2",null,"Import Items from Excel",-1)),(0,i.Lk)("input",{type:"file",onChange:t[20]||(t[20]=(...e)=>r.handleFileUpload&&r.handleFileUpload(...e)),accept:".xlsx, .xls"},null,32),(0,i.Lk)("div",na,[(0,i.Lk)("button",{type:"button",onClick:t[21]||(t[21]=e=>l.showExcelImportDialog=!1)}," Cancel "),(0,i.Lk)("button",{type:"button",onClick:t[22]||(t[22]=(...e)=>r.processExcelFile&&r.processExcelFile(...e)),class:"btn-success"}," Import ")])])])):(0,i.Q3)("",!0)])}var la={data(){return{kitchenItems:[],search:{name:"",category:""},showAddItemForm:!1,showEditItemForm:!1,showDeleteConfirmation:!1,showExcelImportDialog:!1,itemToDelete:null,itemToEdit:null,excelFile:null,newItem:{id:"",name:"",price:0,category:"Beverages",availability:"Available"},editItemData:{id:"",name:"",price:0,category:"Beverages",availability:"Available"},currentPage:1,itemsPerPage:10}},components:{Icon:u.In},computed:{filteredItems(){return this.kitchenItems.filter((e=>e.name.toLowerCase().includes(this.search.name.toLowerCase())&&e.category.includes(this.search.category)))},paginatedItems(){const e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;return this.filteredItems.slice(e,t)},totalPages(){return Math.ceil(this.filteredItems.length/this.itemsPerPage)}},async created(){await this.fetchKitchenItems()},methods:{async fetchKitchenItems(){try{const e=await Le.A.get("http://localhost:3000/api/kitchen-items");this.kitchenItems=e.data}catch(e){console.error("Error fetching kitchen items:",e),alert("Failed to fetch kitchen items. Please try again.")}},async addItem(){try{const e={name:this.newItem.name,price:this.newItem.price,category:this.newItem.category,availability:this.newItem.availability},t=await Le.A.post("http://localhost:3000/api/kitchen-items",e);this.kitchenItems.push(t.data),this.showAddItemForm=!1,this.resetNewItem()}catch(e){console.error("Error adding item:",e),alert("Failed to add item. Please try again.")}},resetNewItem(){this.newItem={id:"",name:"",price:0,category:"Beverages",availability:"Available"}},editItem(e){this.itemToEdit=e,this.editItemData={...e},this.showEditItemForm=!0},async saveEditedItem(){try{const e={name:this.editItemData.name,price:this.editItemData.price,category:this.editItemData.category,availability:this.editItemData.availability},t=await Le.A.put(`http://localhost:3000/api/kitchen-items/${this.editItemData.id}`,e),o=this.kitchenItems.findIndex((e=>e.id===this.editItemData.id));-1!==o&&(this.kitchenItems[o]=t.data),this.showEditItemForm=!1}catch(e){console.error("Error updating item:",e),alert("Failed to update item. Please try again.")}},confirmDeleteItem(e){this.itemToDelete=e,this.showDeleteConfirmation=!0},async deleteItemConfirmed(){try{await Le.A.delete(`http://localhost:3000/api/kitchen-items/${this.itemToDelete.id}`),this.kitchenItems=this.kitchenItems.filter((e=>e.id!==this.itemToDelete.id)),this.showDeleteConfirmation=!1}catch(e){console.error("Error deleting item:",e),alert("Failed to delete item. Please try again.")}},handleFileUpload(e){this.excelFile=e.target.files[0]},async processExcelFile(){if(!this.excelFile)return void alert("Please select a file.");const e=new FormData;e.append("file",this.excelFile);try{const t=await Le.A.post("http://localhost:3000/api/kitchen-items/upload",e,{headers:{"Content-Type":"multipart/form-data"}});this.kitchenItems=[...this.kitchenItems,...t.data.items],this.showExcelImportDialog=!1,alert(`Successfully imported ${t.data.totalAdded} items.`)}catch(t){console.error("Error uploading file:",t),alert("Failed to import items. Please check the file and try again.")}},previousPage(){this.currentPage>1&&this.currentPage--},nextPage(){this.currentPage<this.totalPages&&this.currentPage++}}};const ra=(0,m.A)(la,[["render",sa],["__scopeId","data-v-cfd3ecc6"]]);var ca=ra;const da=[{path:"/",redirect:"/login"},{path:"/login",component:I},{path:"/home",component:x},{path:"/customers",component:Ce},{path:"/branches",component:tt},{path:"/rooms",component:Ut},{path:"/bookings",component:vo},{path:"/kitchen-items",component:ca}],ua=(0,b.aE)({history:(0,b.LA)(),routes:da});var ha=ua,ma=o(782),pa=(0,ma.y$)({state:{role:null},mutations:{setRole(e,t){e.role=t}},actions:{setRole({commit:e},t){e("setRole",t)}},getters:{getRole(e){return e.role}}});const ka=(0,a.Ef)(k);ka.use(ha),ka.use(pa),ka.mount("#app")},7335:function(e,t,o){e.exports=o.p+"img/comma.6ef90f8d.png"}},t={};function o(a){var i=t[a];if(void 0!==i)return i.exports;var n=t[a]={exports:{}};return e[a].call(n.exports,n,n.exports,o),n.exports}o.m=e,function(){var e=[];o.O=function(t,a,i,n){if(!a){var s=1/0;for(d=0;d<e.length;d++){a=e[d][0],i=e[d][1],n=e[d][2];for(var l=!0,r=0;r<a.length;r++)(!1&n||s>=n)&&Object.keys(o.O).every((function(e){return o.O[e](a[r])}))?a.splice(r--,1):(l=!1,n<s&&(s=n));if(l){e.splice(d--,1);var c=i();void 0!==c&&(t=c)}}return t}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[a,i,n]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var a in t)o.o(t,a)&&!o.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){o.p="/"}(),function(){var e={524:0};o.O.j=function(t){return 0===e[t]};var t=function(t,a){var i,n,s=a[0],l=a[1],r=a[2],c=0;if(s.some((function(t){return 0!==e[t]}))){for(i in l)o.o(l,i)&&(o.m[i]=l[i]);if(r)var d=r(o)}for(t&&t(a);c<s.length;c++)n=s[c],o.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return o.O(d)},a=self["webpackChunkcomma_dashboard"]=self["webpackChunkcomma_dashboard"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=o.O(void 0,[504],(function(){return o(2131)}));a=o.O(a)})();
//# sourceMappingURL=app.8c0df395.js.map